{
  "branchName": "milestone-03-e2e-tests",
  "context": {
    "phase": "3c",
    "phaseName": "End-to-End Test Infrastructure",
    "phaseGoal": "Set up Playwright for E2E testing of frontend and API flows",
    "dependsOn": [],
    "successCriteria": [
      "Playwright installed and configured",
      "Test fixtures for authentication",
      "Critical path E2E tests written",
      "CI integration for E2E tests"
    ],
    "qualityGates": [
      "cd e2e && npm run test:ci || true"
    ]
  },
  "userStories": [
    {
      "id": 1,
      "title": "Initialize Playwright test framework",
      "description": "Set up Playwright with TypeScript configuration for E2E testing.",
      "acceptanceCriteria": [
        "e2e/ directory with package.json",
        "Playwright config with baseURL",
        "TypeScript configuration",
        "Multiple browser support (chromium, firefox)",
        "Screenshot and video on failure",
        "HTML reporter configured"
      ],
      "files": [
        "e2e/package.json",
        "e2e/playwright.config.ts",
        "e2e/tsconfig.json"
      ],
      "passes": false
    },
    {
      "id": 2,
      "title": "Create authentication test fixtures",
      "description": "Build reusable fixtures for authenticated and unauthenticated test scenarios.",
      "acceptanceCriteria": [
        "fixtures/auth.ts with login helper",
        "Storage state persistence for sessions",
        "Admin user fixture",
        "Regular user fixture",
        "Unauthenticated fixture",
        "API token fixture for API tests"
      ],
      "files": [
        "e2e/fixtures/auth.ts",
        "e2e/fixtures/index.ts"
      ],
      "passes": false
    },
    {
      "id": 3,
      "title": "Write login flow E2E tests",
      "description": "E2E tests covering login, logout, and session management.",
      "acceptanceCriteria": [
        "Test successful login with valid credentials",
        "Test login failure with invalid credentials",
        "Test logout clears session",
        "Test session persistence across page reload",
        "Test redirect to login for protected routes"
      ],
      "files": [
        "e2e/tests/auth/login.spec.ts",
        "e2e/tests/auth/logout.spec.ts"
      ],
      "passes": false
    },
    {
      "id": 4,
      "title": "Write dashboard E2E tests",
      "description": "E2E tests for main dashboard functionality.",
      "acceptanceCriteria": [
        "Test dashboard loads with metrics",
        "Test navigation between pages",
        "Test data filtering works",
        "Test responsive layout on mobile",
        "Visual regression baseline captured"
      ],
      "files": [
        "e2e/tests/dashboard/dashboard.spec.ts",
        "e2e/tests/dashboard/navigation.spec.ts"
      ],
      "passes": false
    },
    {
      "id": 5,
      "title": "Add CI workflow for E2E tests",
      "description": "GitHub Actions workflow to run E2E tests on PR and main branch.",
      "acceptanceCriteria": [
        ".github/workflows/e2e.yml created",
        "Runs on pull_request and push to main",
        "Playwright browsers installed via cache",
        "Test artifacts uploaded on failure",
        "HTML report as artifact"
      ],
      "files": [
        ".github/workflows/e2e.yml"
      ],
      "passes": false
    }
  ]
}
